<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Inspector</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style_dash.css') }}">
</head>
<body>
  <div class="grid"></div>

  <!-- Description Section with Controls -->
  <div class="description-section">
    <h2 class="description-title">Dashboard Overview</h2>
    <hr class="description-divider">
    <p class="description-text">
      This dashboard provides real-time monitoring of voltage and current values. The graphs below display the instantaneous, average, and peak values for both voltage and current sensors. Use the controls to pause, reset, or export the data.
    </p>
  </div>

  <!-- Main Content Area -->
  <div class="main-content">
    <!-- Monitors Container -->
    <div class="monitors-container" id="monitors-container">
      <!-- Sections will be generated dynamically by JavaScript -->
    </div>

    <!-- Right Sidebar Menu -->
    <div class="right-sidebar">
      <!-- Chart Controls -->
      <div class="sidebar-section">
        <h3 class="sidebar-title">Chart Controls</h3>
        <button class="sidebar-button" id="add-chart-btn">
          <span>➕</span> Add New Chart
        </button>
        <button class="sidebar-button" id="remove-chart-btn">
          <span>➖</span> Remove Last Chart
        </button>
      </div>

      <!-- Available Data Fields -->
      <div class="sidebar-section">
        <h3 class="sidebar-title">Available Data Fields</h3>
        <p class="sidebar-description">Drag and drop fields onto charts</p>
        <div class="data-fields-container" id="data-fields-container">
          <!-- Winch Right -->
          <div class="field-category">Winch Right</div>
          <div class="data-field" draggable="true" data-field="winch_right_rope_force">
            <span class="field-icon" style="background: #ff6b6b;"></span>
            <span class="field-name">Rope Force (N)</span>
          </div>
          <div class="data-field" draggable="true" data-field="winch_right_rope_length">
            <span class="field-icon" style="background: #ff8585;"></span>
            <span class="field-name">Rope Length (m)</span>
          </div>
          <div class="data-field" draggable="true" data-field="winch_right_rope_velocity">
            <span class="field-icon" style="background: #ff9f9f;"></span>
            <span class="field-name">Rope Velocity (m/s)</span>
          </div>
          <div class="data-field" draggable="true" data-field="winch_right_current">
            <span class="field-icon" style="background: #ffb8b8;"></span>
            <span class="field-name">Current (A)</span>
          </div>
          
          <!-- Winch Left -->
          <div class="field-category">Winch Left</div>
          <div class="data-field" draggable="true" data-field="winch_left_rope_force">
            <span class="field-icon" style="background: #4ecdc4;"></span>
            <span class="field-name">Rope Force (N)</span>
          </div>
          <div class="data-field" draggable="true" data-field="winch_left_rope_length">
            <span class="field-icon" style="background: #6ed7d0;"></span>
            <span class="field-name">Rope Length (m)</span>
          </div>
          <div class="data-field" draggable="true" data-field="winch_left_rope_velocity">
            <span class="field-icon" style="background: #8ee1db;"></span>
            <span class="field-name">Rope Velocity (m/s)</span>
          </div>
          <div class="data-field" draggable="true" data-field="winch_left_current">
            <span class="field-icon" style="background: #aeebe6;"></span>
            <span class="field-name">Current (A)</span>
          </div>
          
          <!-- Rope IMU -->
          <div class="field-category">Rope IMU</div>
          <div class="data-field" draggable="true" data-field="rope_imu_angular_velocity_x">
            <span class="field-icon" style="background: #95e1d3;"></span>
            <span class="field-name">AngVel X (rad/s)</span>
          </div>
          <div class="data-field" draggable="true" data-field="rope_imu_angular_velocity_y">
            <span class="field-icon" style="background: #a8e6cf;"></span>
            <span class="field-name">AngVel Y (rad/s)</span>
          </div>
          <div class="data-field" draggable="true" data-field="rope_imu_angular_velocity_z">
            <span class="field-icon" style="background: #bbebdb;"></span>
            <span class="field-name">AngVel Z (rad/s)</span>
          </div>
          <div class="data-field" draggable="true" data-field="rope_imu_rpy_roll">
            <span class="field-icon" style="background: #95d5e1;"></span>
            <span class="field-name">Roll (rad)</span>
          </div>
          <div class="data-field" draggable="true" data-field="rope_imu_rpy_pitch">
            <span class="field-icon" style="background: #a8dfe6;"></span>
            <span class="field-name">Pitch (rad)</span>
          </div>
          <div class="data-field" draggable="true" data-field="rope_imu_rpy_yaw">
            <span class="field-icon" style="background: #bbe9eb;"></span>
            <span class="field-name">Yaw (rad)</span>
          </div>
          <div class="data-field" draggable="true" data-field="rope_imu_acceleration_x">
            <span class="field-icon" style="background: #c7f0f2;"></span>
            <span class="field-name">Accel X (m/s²)</span>
          </div>
          <div class="data-field" draggable="true" data-field="rope_imu_acceleration_y">
            <span class="field-icon" style="background: #d4f4f5;"></span>
            <span class="field-name">Accel Y (m/s²)</span>
          </div>
          <div class="data-field" draggable="true" data-field="rope_imu_acceleration_z">
            <span class="field-icon" style="background: #e1f8f9;"></span>
            <span class="field-name">Accel Z (m/s²)</span>
          </div>
          
          <!-- Body IMU -->
          <div class="field-category">Body IMU</div>
          <div class="data-field" draggable="true" data-field="body_imu_angular_velocity_x">
            <span class="field-icon" style="background: #f38181;"></span>
            <span class="field-name">AngVel X (rad/s)</span>
          </div>
          <div class="data-field" draggable="true" data-field="body_imu_angular_velocity_y">
            <span class="field-icon" style="background: #f59b9b;"></span>
            <span class="field-name">AngVel Y (rad/s)</span>
          </div>
          <div class="data-field" draggable="true" data-field="body_imu_angular_velocity_z">
            <span class="field-icon" style="background: #f7b5b5;"></span>
            <span class="field-name">AngVel Z (rad/s)</span>
          </div>
          <div class="data-field" draggable="true" data-field="body_imu_rpy_roll">
            <span class="field-icon" style="background: #aa96da;"></span>
            <span class="field-name">Roll (rad)</span>
          </div>
          <div class="data-field" draggable="true" data-field="body_imu_rpy_pitch">
            <span class="field-icon" style="background: #baa8e0;"></span>
            <span class="field-name">Pitch (rad)</span>
          </div>
          <div class="data-field" draggable="true" data-field="body_imu_rpy_yaw">
            <span class="field-icon" style="background: #cabae6;"></span>
            <span class="field-name">Yaw (rad)</span>
          </div>
          <div class="data-field" draggable="true" data-field="body_imu_acceleration_x">
            <span class="field-icon" style="background: #dacdec;"></span>
            <span class="field-name">Accel X (m/s²)</span>
          </div>
          <div class="data-field" draggable="true" data-field="body_imu_acceleration_y">
            <span class="field-icon" style="background: #e8dff1;"></span>
            <span class="field-name">Accel Y (m/s²)</span>
          </div>
          <div class="data-field" draggable="true" data-field="body_imu_acceleration_z">
            <span class="field-icon" style="background: #f6f1f7;"></span>
            <span class="field-name">Accel Z (m/s²)</span>
          </div>
        </div>
      </div>

      <!-- Active Charts Info -->
      <div class="sidebar-section">
        <h3 class="sidebar-title">Active Charts</h3>
        <div class="active-charts-list" id="active-charts-list">
          <p style="color: #888; font-size: 12px; text-align: center; font-style: italic;">No charts yet. Click "Add New Chart" to start!</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Include Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Include Socket.IO -->
  <script src="https://cdn.socket.io/4.3.2/socket.io.min.js"></script>
  <script src="{{ url_for('static', filename='js/script_dashboard.js') }}"></script>
</body>
</html>